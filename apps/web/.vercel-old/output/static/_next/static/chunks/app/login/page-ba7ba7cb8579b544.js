(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{5643:function(e,t,s){Promise.resolve().then(s.bind(s,4450))},4450:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return i}});var r=s(887),a=s(3693),n=s(5189),o=s(5063);function i(){let[e,t]=(0,a.useState)(""),[s,i]=(0,a.useState)(""),[c,u]=(0,a.useState)(!1),[l,d]=(0,a.useState)(null),[h,m]=(0,a.useState)(!1),{login:f,register:y}=(0,o.a)(),g=async t=>{t.preventDefault(),d(null),m(!0);try{c?await y(e,s):await f(e,s)}catch(e){d(e instanceof Error?e.message:"Authentication failed")}finally{m(!1)}};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[(0,r.jsx)(n.default,{href:"/",className:"flex justify-center",children:(0,r.jsx)("h1",{className:"text-3xl font-bold text-primary-600",children:"Sentinel"})}),(0,r.jsx)("h2",{className:"mt-6 text-center text-2xl font-bold text-gray-900",children:c?"Create your account":"Sign in to your account"})]}),(0,r.jsx)("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:(0,r.jsxs)("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[(0,r.jsxs)("form",{className:"space-y-6",onSubmit:g,children:[l&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:l}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),(0,r.jsx)("div",{className:"mt-1",children:(0,r.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:e=>t(e.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,r.jsx)("div",{className:"mt-1",children:(0,r.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:c?"new-password":"current-password",required:!0,minLength:6,value:s,onChange:e=>i(e.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500"})})]}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{type:"submit",disabled:h,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:h?"Please wait...":c?"Create Account":"Sign In"})})]}),(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,r.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,r.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,r.jsx)("span",{className:"px-2 bg-white text-gray-500",children:c?"Already have an account?":"New to Sentinel?"})})]}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsx)("button",{type:"button",onClick:()=>{u(!c),d(null)},className:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:c?"Sign in instead":"Create an account"})})]})]})})]})}},5063:function(e,t,s){"use strict";s.d(t,{H:function(){return l},a:function(){return d}});var r=s(887),a=s(3693),n=s(2448),o=s(8151);let i=(0,a.createContext)(void 0),c="sentinel_token",u="sentinel_user";function l(e){let{children:t}=e,[s,l]=(0,a.useState)(null),[d,h]=(0,a.useState)(!0),m=(0,n.useRouter)(),f=(0,n.usePathname)();(0,a.useEffect)(()=>{let e=localStorage.getItem(c),t=localStorage.getItem(u);if(e&&t)try{let s=JSON.parse(t);l(s),o.Z.setToken(e)}catch(e){localStorage.removeItem(c),localStorage.removeItem(u)}h(!1)},[]),(0,a.useEffect)(()=>{!d&&!s&&(null==f?void 0:f.startsWith("/dashboard"))&&m.push("/login")},[s,d,f,m]);let y=async(e,t)=>{let{accessToken:s,user:r}=await o.Z.login(e,t);localStorage.setItem(c,s),localStorage.setItem(u,JSON.stringify(r)),o.Z.setToken(s),l(r),m.push("/dashboard")},g=async(e,t)=>{await o.Z.register(e,t),await y(e,t)};return(0,r.jsx)(i.Provider,{value:{user:s,isLoading:d,login:y,register:g,logout:()=>{localStorage.removeItem(c),localStorage.removeItem(u),o.Z.setToken(null),l(null),m.push("/login")}},children:t})}function d(){let e=(0,a.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},8151:function(e,t,s){"use strict";class r{setToken(e){this.token=e}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{token:s,...r}=t,a=s||this.token,n={"Content-Type":"application/json",...t.headers};a&&(n.Authorization="Bearer ".concat(a));let o=await fetch("".concat(this.baseUrl).concat(e),{...r,headers:n});if(!o.ok)throw Error((await o.json().catch(()=>({}))).message||"API Error: ".concat(o.status));return o.json()}async login(e,t){return this.request("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})})}async register(e,t){return this.request("/auth/register",{method:"POST",body:JSON.stringify({email:e,password:t})})}async getWorkspaces(){return this.request("/workspaces")}async getWorkspace(e){return this.request("/workspaces/".concat(e))}async createWorkspace(e){return this.request("/workspaces",{method:"POST",body:JSON.stringify(e)})}async getSources(e){return this.request("/sources?workspaceId=".concat(e))}async createSource(e){return this.request("/sources",{method:"POST",body:JSON.stringify(e)})}async getRules(e){return this.request("/rules?workspaceId=".concat(e))}async getRule(e){return this.request("/rules/".concat(e))}async createRule(e){return this.request("/rules",{method:"POST",body:JSON.stringify(e)})}async updateRule(e,t){return this.request("/rules/".concat(e),{method:"PATCH",body:JSON.stringify(t)})}async testRule(e){return this.request("/rules/".concat(e,"/test"),{method:"POST"})}async pauseRule(e){return this.request("/rules/".concat(e,"/pause"),{method:"POST"})}async resumeRule(e){return this.request("/rules/".concat(e,"/resume"),{method:"POST"})}async resetRuleHealth(e){return this.request("/rules/".concat(e,"/reset-health"),{method:"POST"})}async getAlerts(e){return this.request("/alerts?workspaceId=".concat(e))}async getNotificationChannels(e){return this.request("/notification-channels?workspaceId=".concat(e))}async getNotificationChannel(e){return this.request("/notification-channels/".concat(e))}async createNotificationChannel(e){return this.request("/notification-channels",{method:"POST",body:JSON.stringify(e)})}async updateNotificationChannel(e,t){return this.request("/notification-channels/".concat(e),{method:"PATCH",body:JSON.stringify(t)})}async deleteNotificationChannel(e){return this.request("/notification-channels/".concat(e),{method:"DELETE"})}async testNotificationChannel(e){return this.request("/notification-channels/".concat(e,"/test"),{method:"POST"})}async getHealthSummary(e){return this.request("/rules/workspace/".concat(e,"/health-summary"))}async getLowHealthRules(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return this.request("/rules/workspace/".concat(e,"/low-health?threshold=").concat(t))}constructor(e){this.token=null,this.baseUrl=e}}let a=new r("https://sentinel.taxinearme.sk/api");t.Z=a},2448:function(e,t,s){"use strict";var r=s(564);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})}},function(e){e.O(0,[189,175,484,744],function(){return e(e.s=5643)}),_N_E=e.O()}]);