(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{630:function(e,t,n){Promise.resolve().then(n.bind(n,2033)),Promise.resolve().then(n.t.bind(n,3438,23)),Promise.resolve().then(n.t.bind(n,9020,23))},2033:function(e,t,n){"use strict";n.d(t,{Providers:function(){return a}});var s=n(887),r=n(5063);function a(e){let{children:t}=e;return(0,s.jsx)(r.H,{children:t})}},5063:function(e,t,n){"use strict";n.d(t,{H:function(){return l},a:function(){return h}});var s=n(887),r=n(3693),a=n(2448),o=n(8151);let c=(0,r.createContext)(void 0),u="sentinel_token",i="sentinel_user";function l(e){let{children:t}=e,[n,l]=(0,r.useState)(null),[h,f]=(0,r.useState)(!0),d=(0,a.useRouter)(),y=(0,a.usePathname)();(0,r.useEffect)(()=>{let e=localStorage.getItem(u),t=localStorage.getItem(i);if(e&&t)try{let n=JSON.parse(t);l(n),o.Z.setToken(e)}catch(e){localStorage.removeItem(u),localStorage.removeItem(i)}f(!1)},[]),(0,r.useEffect)(()=>{!h&&!n&&(null==y?void 0:y.startsWith("/dashboard"))&&d.push("/login")},[n,h,y,d]);let m=async(e,t)=>{let{accessToken:n,user:s}=await o.Z.login(e,t);localStorage.setItem(u,n),localStorage.setItem(i,JSON.stringify(s)),o.Z.setToken(n),l(s),d.push("/dashboard")},g=async(e,t)=>{await o.Z.register(e,t),await m(e,t)};return(0,s.jsx)(c.Provider,{value:{user:n,isLoading:h,login:m,register:g,logout:()=>{localStorage.removeItem(u),localStorage.removeItem(i),o.Z.setToken(null),l(null),d.push("/login")}},children:t})}function h(){let e=(0,r.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},8151:function(e,t,n){"use strict";class s{setToken(e){this.token=e}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{token:n,...s}=t,r=n||this.token,a={"Content-Type":"application/json",...t.headers};r&&(a.Authorization="Bearer ".concat(r));let o=await fetch("".concat(this.baseUrl).concat(e),{...s,headers:a});if(!o.ok)throw Error((await o.json().catch(()=>({}))).message||"API Error: ".concat(o.status));return o.json()}async login(e,t){return this.request("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})})}async register(e,t){return this.request("/auth/register",{method:"POST",body:JSON.stringify({email:e,password:t})})}async getWorkspaces(){return this.request("/workspaces")}async getWorkspace(e){return this.request("/workspaces/".concat(e))}async createWorkspace(e){return this.request("/workspaces",{method:"POST",body:JSON.stringify(e)})}async getSources(e){return this.request("/sources?workspaceId=".concat(e))}async createSource(e){return this.request("/sources",{method:"POST",body:JSON.stringify(e)})}async getRules(e){return this.request("/rules?workspaceId=".concat(e))}async getRule(e){return this.request("/rules/".concat(e))}async createRule(e){return this.request("/rules",{method:"POST",body:JSON.stringify(e)})}async updateRule(e,t){return this.request("/rules/".concat(e),{method:"PATCH",body:JSON.stringify(t)})}async testRule(e){return this.request("/rules/".concat(e,"/test"),{method:"POST"})}async pauseRule(e){return this.request("/rules/".concat(e,"/pause"),{method:"POST"})}async resumeRule(e){return this.request("/rules/".concat(e,"/resume"),{method:"POST"})}async resetRuleHealth(e){return this.request("/rules/".concat(e,"/reset-health"),{method:"POST"})}async getAlerts(e){return this.request("/alerts?workspaceId=".concat(e))}async getNotificationChannels(e){return this.request("/notification-channels?workspaceId=".concat(e))}async getNotificationChannel(e){return this.request("/notification-channels/".concat(e))}async createNotificationChannel(e){return this.request("/notification-channels",{method:"POST",body:JSON.stringify(e)})}async updateNotificationChannel(e,t){return this.request("/notification-channels/".concat(e),{method:"PATCH",body:JSON.stringify(t)})}async deleteNotificationChannel(e){return this.request("/notification-channels/".concat(e),{method:"DELETE"})}async testNotificationChannel(e){return this.request("/notification-channels/".concat(e,"/test"),{method:"POST"})}async getHealthSummary(e){return this.request("/rules/workspace/".concat(e,"/health-summary"))}async getLowHealthRules(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return this.request("/rules/workspace/".concat(e,"/low-health?threshold=").concat(t))}constructor(e){this.token=null,this.baseUrl=e}}let r=new s("https://sentinel.taxinearme.sk/api");t.Z=r},2448:function(e,t,n){"use strict";var s=n(564);n.o(s,"useParams")&&n.d(t,{useParams:function(){return s.useParams}}),n.o(s,"usePathname")&&n.d(t,{usePathname:function(){return s.usePathname}}),n.o(s,"useRouter")&&n.d(t,{useRouter:function(){return s.useRouter}})},9020:function(){},3438:function(e){e.exports={style:{fontFamily:"'__Inter_f367f3', '__Inter_Fallback_f367f3'",fontStyle:"normal"},className:"__className_f367f3"}}},function(e){e.O(0,[361,175,484,744],function(){return e(e.s=630)}),_N_E=e.O()}]);