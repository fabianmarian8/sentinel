(()=>{var e={};e.id=455,e.ids=[455],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7907:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c}),r(4170),r(1400),r(3443);var s=r(9324),a=r(562),n=r(2561),i=r.n(n),l=r(2691),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let c=["",{children:["dashboard",{children:["settings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,4170)),"/Users/marianfabian/Projects/sentinel/apps/web/src/app/dashboard/settings/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,1400)),"/Users/marianfabian/Projects/sentinel/apps/web/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,3443,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/marianfabian/Projects/sentinel/apps/web/src/app/dashboard/settings/page.tsx"],u="/dashboard/settings/page",h={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/settings/page",pathname:"/dashboard/settings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},4171:(e,t,r)=>{Promise.resolve().then(r.bind(r,2655))},6500:(e,t,r)=>{Promise.resolve().then(r.bind(r,501))},8437:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,5510,23)),Promise.resolve().then(r.t.bind(r,9137,23)),Promise.resolve().then(r.t.bind(r,2141,23)),Promise.resolve().then(r.t.bind(r,9188,23)),Promise.resolve().then(r.t.bind(r,2587,23)),Promise.resolve().then(r.t.bind(r,5716,23))},2655:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(3316),a=r(4381),n=r(4364),i=r(7883),l=r(7455);let o=[{value:"email",label:"Email",icon:"\uD83D\uDCE7"},{value:"telegram",label:"Telegram",icon:"✈️"},{value:"slack",label:"Slack",icon:"\uD83D\uDCAC"},{value:"webhook",label:"Webhook",icon:"\uD83D\uDD17"}];function c(){let{user:e,isLoading:t}=(0,l.a)(),[r,c]=(0,a.useState)([]),[u,h]=(0,a.useState)(!0),[m,x]=(0,a.useState)(null),[p,g]=(0,a.useState)(!1),[b,y]=(0,a.useState)(null),[f,j]=(0,a.useState)(null),[v,N]=(0,a.useState)(null),k=async e=>{try{await i.Z.updateNotificationChannel(e.id,{enabled:!e.enabled}),c(r.map(t=>t.id===e.id?{...t,enabled:!t.enabled}:t))}catch(e){x(e instanceof Error?e.message:"Failed to update channel")}},w=async e=>{if(confirm("Are you sure you want to delete this notification channel?"))try{await i.Z.deleteNotificationChannel(e),c(r.filter(t=>t.id!==e))}catch(e){x(e instanceof Error?e.message:"Failed to delete channel")}},C=async e=>{try{y(e),j(null);let t=await i.Z.testNotificationChannel(e);j({id:e,...t})}catch(t){j({id:e,success:!1,message:t instanceof Error?t.message:"Test failed"})}finally{y(null)}},S=async e=>{try{let t=await i.Z.createNotificationChannel(e);c([t,...r]),g(!1)}catch(e){throw e}};return t?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("header",{className:"bg-white shadow-sm border-b",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsx("div",{className:"flex justify-between items-center h-16",children:(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx(n.default,{href:"/",className:"text-2xl font-bold text-primary-600",children:"Sentinel"}),s.jsx("span",{className:"ml-4 text-gray-400",children:"/"}),s.jsx(n.default,{href:"/dashboard",className:"ml-4 text-gray-500 hover:text-gray-700",children:"Dashboard"}),s.jsx("span",{className:"ml-4 text-gray-400",children:"/"}),s.jsx("span",{className:"ml-4 text-gray-900 font-medium",children:"Settings"})]})})})}),(0,s.jsxs)("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsx("div",{className:"flex space-x-4 mb-8 border-b",children:s.jsx("button",{className:"px-4 py-2 border-b-2 border-primary-600 text-primary-600 font-medium",children:"Notification Channels"})}),m&&(0,s.jsxs)("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:[m,s.jsx("button",{onClick:()=>x(null),className:"float-right text-red-500 hover:text-red-700",children:"\xd7"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow border border-gray-200",children:[(0,s.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Notification Channels"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Configure where you receive alerts"})]}),s.jsx("button",{onClick:()=>g(!0),className:"bg-primary-600 text-white hover:bg-primary-700 px-4 py-2 rounded-md text-sm font-medium",children:"+ Add Channel"})]}),u?s.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading..."}):0===r.length?(0,s.jsxs)("div",{className:"p-8 text-center",children:[s.jsx("div",{className:"text-4xl mb-4",children:"\uD83D\uDD14"}),s.jsx("p",{className:"text-gray-500 mb-4",children:"No notification channels configured"}),s.jsx("button",{onClick:()=>g(!0),className:"text-primary-600 hover:text-primary-700 font-medium",children:"Add your first channel"})]}):s.jsx("ul",{className:"divide-y divide-gray-200",children:r.map(e=>s.jsx("li",{className:"px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[s.jsx("span",{className:"text-2xl",children:o.find(t=>t.value===e.type)?.icon||"\uD83D\uDCE2"}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900",children:e.name}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[e.type.charAt(0).toUpperCase()+e.type.slice(1),e.config?.email&&` - ${e.config.email}`,e.config?.chatId&&` - Chat ID: ${e.config.chatId}`,e.config?.channel&&` - ${e.config.channel}`,e.config?.url&&` - ${e.config.url}`]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[f?.id===e.id&&s.jsx("span",{className:`text-sm ${f.success?"text-green-600":"text-red-600"}`,children:f.message}),s.jsx("button",{onClick:()=>C(e.id),disabled:b===e.id,className:"text-gray-500 hover:text-gray-700 text-sm",children:b===e.id?"Testing...":"Test"}),(0,s.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:e.enabled,onChange:()=>k(e),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]}),s.jsx("button",{onClick:()=>w(e.id),className:"text-red-500 hover:text-red-700",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},e.id))})]})]}),p&&v&&s.jsx(d,{workspaceId:v,onAdd:S,onClose:()=>g(!1)})]})}function d({workspaceId:e,onAdd:t,onClose:r}){let[n,i]=(0,a.useState)("email"),[l,c]=(0,a.useState)(""),[d,u]=(0,a.useState)(""),[h,m]=(0,a.useState)(""),[x,p]=(0,a.useState)(""),[g,b]=(0,a.useState)(""),[y,f]=(0,a.useState)(""),[j,v]=(0,a.useState)(""),[N,k]=(0,a.useState)(!1),[w,C]=(0,a.useState)(null),S=async r=>{r.preventDefault(),C(null);let s={name:l||`${n.charAt(0).toUpperCase()+n.slice(1)} Channel`,type:n,workspaceId:e};switch(n){case"email":if(!d){C("Email is required");return}s.emailConfig={email:d};break;case"telegram":if(!h){C("Chat ID is required");return}s.telegramConfig={chatId:h,botToken:x||void 0};break;case"slack":if(!g){C("Webhook URL is required");return}s.slackConfig={webhookUrl:g,channel:y||void 0};break;case"webhook":if(!j){C("Webhook URL is required");return}s.webhookConfig={url:j}}try{k(!0),await t(s)}catch(e){C(e instanceof Error?e.message:"Failed to add channel")}finally{k(!1)}};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[(0,s.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Add Notification Channel"}),s.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsxs)("form",{onSubmit:S,className:"p-6 space-y-4",children:[w&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-2 rounded text-sm",children:w}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Channel Type"}),s.jsx("div",{className:"grid grid-cols-4 gap-2",children:o.map(e=>(0,s.jsxs)("button",{type:"button",onClick:()=>i(e.value),className:`p-3 rounded-lg border text-center transition-colors ${n===e.value?"border-primary-500 bg-primary-50 text-primary-700":"border-gray-200 hover:border-gray-300"}`,children:[s.jsx("div",{className:"text-2xl mb-1",children:e.icon}),s.jsx("div",{className:"text-xs",children:e.label})]},e.value))})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name (optional)"}),s.jsx("input",{type:"text",value:l,onChange:e=>c(e.target.value),placeholder:`My ${n.charAt(0).toUpperCase()+n.slice(1)} Notifications`,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),"email"===n&&(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),s.jsx("input",{type:"email",value:d,onChange:e=>u(e.target.value),placeholder:"alerts@example.com",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),"telegram"===n&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Chat ID"}),s.jsx("input",{type:"text",value:h,onChange:e=>m(e.target.value),placeholder:"123456789",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Get your chat ID from @userinfobot on Telegram"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bot Token (optional)"}),s.jsx("input",{type:"text",value:x,onChange:e=>p(e.target.value),placeholder:"Use default bot if empty",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"})]})]}),"slack"===n&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Webhook URL"}),s.jsx("input",{type:"url",value:g,onChange:e=>b(e.target.value),placeholder:"https://hooks.slack.com/services/...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Channel (optional)"}),s.jsx("input",{type:"text",value:y,onChange:e=>f(e.target.value),placeholder:"#monitoring",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"})]})]}),"webhook"===n&&(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Webhook URL"}),s.jsx("input",{type:"url",value:j,onChange:e=>v(e.target.value),placeholder:"https://your-server.com/webhook",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"We'll POST JSON data to this URL when alerts trigger"})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-700 hover:text-gray-900",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:N,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 disabled:opacity-50",children:N?"Adding...":"Add Channel"})]})]})]})})}},501:(e,t,r)=>{"use strict";r.d(t,{Providers:()=>n});var s=r(3316),a=r(7455);function n({children:e}){return s.jsx(a.H,{children:e})}},7455:(e,t,r)=>{"use strict";r.d(t,{H:()=>d,a:()=>u});var s=r(3316),a=r(4381),n=r(8015),i=r(7883);let l=(0,a.createContext)(void 0),o="sentinel_token",c="sentinel_user";function d({children:e}){let[t,r]=(0,a.useState)(null),[d,u]=(0,a.useState)(!0),h=(0,n.useRouter)();(0,n.usePathname)();let m=async(e,t)=>{let{accessToken:s,user:a}=await i.Z.login(e,t);localStorage.setItem(o,s),localStorage.setItem(c,JSON.stringify(a)),i.Z.setToken(s),r(a),h.push("/dashboard")},x=async(e,t)=>{await i.Z.register(e,t),await m(e,t)};return s.jsx(l.Provider,{value:{user:t,isLoading:d,login:m,register:x,logout:()=>{localStorage.removeItem(o),localStorage.removeItem(c),i.Z.setToken(null),r(null),h.push("/login")}},children:e})}function u(){let e=(0,a.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},7883:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});class s{constructor(e){this.token=null,this.baseUrl=e}setToken(e){this.token=e}async request(e,t={}){let{token:r,...s}=t,a=r||this.token,n={"Content-Type":"application/json",...t.headers};a&&(n.Authorization=`Bearer ${a}`);let i=await fetch(`${this.baseUrl}${e}`,{...s,headers:n});if(!i.ok)throw Error((await i.json().catch(()=>({}))).message||`API Error: ${i.status}`);return i.json()}async login(e,t){return this.request("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})})}async register(e,t){return this.request("/auth/register",{method:"POST",body:JSON.stringify({email:e,password:t})})}async getWorkspaces(){return this.request("/workspaces")}async getWorkspace(e){return this.request(`/workspaces/${e}`)}async createWorkspace(e){return this.request("/workspaces",{method:"POST",body:JSON.stringify(e)})}async getSources(e){return this.request(`/sources?workspaceId=${e}`)}async createSource(e){return this.request("/sources",{method:"POST",body:JSON.stringify(e)})}async getRules(e){return this.request(`/rules?workspaceId=${e}`)}async getRule(e){return this.request(`/rules/${e}`)}async createRule(e){return this.request("/rules",{method:"POST",body:JSON.stringify(e)})}async updateRule(e,t){return this.request(`/rules/${e}`,{method:"PATCH",body:JSON.stringify(t)})}async testRule(e){return this.request(`/rules/${e}/test`,{method:"POST"})}async pauseRule(e){return this.request(`/rules/${e}/pause`,{method:"POST"})}async resumeRule(e){return this.request(`/rules/${e}/resume`,{method:"POST"})}async resetRuleHealth(e){return this.request(`/rules/${e}/reset-health`,{method:"POST"})}async getAlerts(e){return this.request(`/alerts?workspaceId=${e}`)}async getNotificationChannels(e){return this.request(`/notification-channels?workspaceId=${e}`)}async getNotificationChannel(e){return this.request(`/notification-channels/${e}`)}async createNotificationChannel(e){return this.request("/notification-channels",{method:"POST",body:JSON.stringify(e)})}async updateNotificationChannel(e,t){return this.request(`/notification-channels/${e}`,{method:"PATCH",body:JSON.stringify(t)})}async deleteNotificationChannel(e){return this.request(`/notification-channels/${e}`,{method:"DELETE"})}async testNotificationChannel(e){return this.request(`/notification-channels/${e}/test`,{method:"POST"})}async getHealthSummary(e){return this.request(`/rules/workspace/${e}/health-summary`)}async getLowHealthRules(e,t=50){return this.request(`/rules/workspace/${e}/low-health?threshold=${t}`)}}let a=new s("https://sentinel.taxinearme.sk/api")},4170:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(6883).createProxy)(String.raw`/Users/marianfabian/Projects/sentinel/apps/web/src/app/dashboard/settings/page.tsx#default`)},1400:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o,metadata:()=>l});var s=r(6857),a=r(1945),n=r.n(a);r(5652);let i=(0,r(6883).createProxy)(String.raw`/Users/marianfabian/Projects/sentinel/apps/web/src/app/providers.tsx#Providers`),l={title:"Sentinel - Change Intelligence Platform",description:"Monitor website changes, track prices, and get alerts"};function o({children:e}){return s.jsx("html",{lang:"en",children:s.jsx("body",{className:n().className,children:s.jsx(i,{children:s.jsx("div",{className:"min-h-screen bg-gray-50",children:e})})})})}},5652:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[465,364],()=>r(7907));module.exports=s})();